
"
" ~/.pentadactylrc
"

" REMINDER:
" fix search while passkeys
" [about:config] accessibility.typeaheadfind: false


"loadplugins '\.(js|penta)$'
group user

" Things that should have been defaults... sigh {{{
" -----------------------------------------------------------------------------

" Open help in new zab
set newtab='help'

" Only show tab line when there are multiple tabs
"set showtabline='multitab' "" seems unstable(?)/unusable with :rehash (bug) TODO
set showtabline='always'

" Don't leak browser's name visited sites
set titlestring=''

" Immediately timeout on keycode sequences
" (Â¼ second)
set timeout
set timeoutlen=250

" Passthrough
map -builtin -modes=n,v,i,t <C-z> <nop>
map -builtin -modes=n,v,i,t <C-v> <nop>
map -builtin -modes=n,v,i,t <A-b> <nop>
map -builtin -modes=n,v,i,t <A-b> <pass-next-builtin>
map -builtin -modes=n,v,i,t <C-S-a> <pass-all-keys>
map -builtin -modes=n,v,i,t <C-a> <pass-next-key>

" Copy & Paste, bold, italics
" Needed for google docs (sheets: formula copy)
" Needed for easy compatibilty with client environments
map -builtin -modes=v,i,t <C-c> <pass-next-key><C-c>
map -builtin -modes=v,i,t <C-u> <pass-next-key><C-u>
map -builtin -modes=v,i,t <C-x> <pass-next-key><C-x>
map -builtin -modes=n,v,i,t,c,o <C-v> <pass-next-key><C-v>
map -builtin -modes=n,v,i,t,c,o <C-z> <pass-next-key><C-z>
map -builtin -modes=n,v i <focus-input>
map -builtin -modes=n,v I <c-i>

" set noinsertmode

" }}}

" Passkeys "{{{
" -----------------------------------------------------------------------------
" I'm more into using pass through now
"set passkeys+=mail.google.com
"set passkeys+=github.com:<Return>
"}}}

" Options {{{
" -----------------------------------------------------------------------------

" no bottom or right scrollbar
set guioptions-=br 
set guioptions+=Cs

" hi all search matches, not just the first.
set hlfind

" google or duckduckgo, but sigh...
set defsearch=g       

" popup windows
" expected behaviour: open target=_blank in new tab, but resized popups in a new window
set popups='resized'

" Shut up.
"javascript dactyl.beep = function() { return false; }


"}}}

" Status line {{{
" -----------------------------------------------------------------------------

""colorscheme kolor

" w0ng statusline
" https://github.com/w0ng/dotfiles/blob/master/.pentadactylrc
hi -a StatusLine font-weight: normal;
hi -a StatusLineNormal color:#C5C8C6 !important; background:#282A2E !important;

" alternative statusline
"hi StatusLine -moz-appearance: none !important; font-weight: bold; background: transparent !important; border: 0px !important; min-height: 22px !important; text-shadow: none !important; font: normal 14px/1 'Source Code Pro' !important; padding: 3px 0px 3px 5px !important;

" hints
"hi Hint font-size: 9pt; background: rgba(210,1,133,0.8) !important; border: 2px solid rgb(165,1,105); padding: 4px; border-radius: 3px; font-weight: bold; margin-left: -25px; color: white; font-family: Source Code Pro; line-height:1em;
"hi HintActive background: rgba(145,197,43,0.8) !important;
"hi HintElem background: rgba(255, 209, 20, 0.7) !important;
"}}}

" Font {{{
" -----------------------------------------------------------------------------

" Linux fonts :%s/Source Code Pro/Source Code Pro/
" Source Code Pro font: http://www.fontsquirrel.com/fonts/cousine

hi FontCode -a font-family:Cousine,Monaco,Menlo,Consolas,monospace !important; font-size: 9pt !important;
hi FontFixed -a font-family:Cousine,Monaco,Menlo,Consolas,monospace !important; font-size: 9pt !important;
hi Normal -a font-family:Cousine,Monaco,Menlo,Consolas,monospace !important; font-size: 9pt !important;
"}}}




" Mappings {{{
" -----------------------------------------------------------------------------

map \\ <Leader>

nmap -builtin <Leader>p :private winopen<CR>
nmap -builtin <Leader>w :winopen<CR>
nmap -builtin <Leader>ad :tabdetach<CR>
nmap -builtin <Leader>aa :tabattach 
nmap -builtin <Leader>ap :pin<CR>

" tabline
nmap -builtin <F9> :set showtabline=always<CR>
nmap -builtin <S-F9> :set showtabline=never<CR>
nmap -builtin <leader>l :set showtabline=always<CR>
nmap -builtin <leader>L :set showtabline=never<CR>

" Prevent butterfingers
" defaults: q=recmacro, m=quickmark, d=tabclose, ZZ=saveanquit, zQ=trashandquit
map -builtin q <nop>
map -builtin m <nop>
map -builtin d <nop>
map -builtin D <nop>
map -builtin ZZ <nop>
map -builtin zQ <nop>


" Tab closing
map -builtin dd :tabclose<CR> 

 
" Zoom > ZXooom 
" default: <count>zz 
map -builtin zx <text-zoom>
map -builtin ZX <text-zoom>

" Turn off search highlight
nmap -builtin <Leader>\\ :noh<CR>
" NO WAY nmap -builtin /// :noh<CR>  <---- causes the annoying sideeffect of searchahead delays

" Swap semicolon and colon, as in vim.
" based on https://github.com/w0ng/dotfiles/blob/master/.pentadactylr
nmap -builtin -modes=n,v,c,o ; :
nmap -builtin -modes=n,v,c,o : ;

" based on https://github.com/w0ng/dotfiles/blob/master/.pentadactylrc
nmap -builtin <M-S-l> :tabmove! +1<CR>
nmap -builtin <M-S-h> :tabmove! -1<CR>


" FASTER scroll
nmap -builtin -silent j 5j
nmap -builtin -silent k 5k

" Switch tabs 
map -count -modes=n,v <A-h> -builtin <count>:tabNext<CR>
map -count -modes=n,v <A-j> -builtin <count>:tabNext<CR>
map -count -modes=n,v <A-l> -builtin <count>:tabnext<CR>
map -count -modes=n,v <A-k> -builtin <count>:tabnext<CR>


" SPEAK!  sprechen, sprach, gesprochen"{{{

" Text-to-Speech with festival and espeak for Pentadactyl
map <A-S-s> -builtin -js dactyl.execute(":!espeak -s140 -g1 -v mb-en1 <<'EOF'\n" + content.getSelection().toString() + "\nEOF" )
map <A-s> -builtin -js dactyl.execute(":! festival --tts <<'EOF'\n" + content.getSelection().toString() + "\nEOF" )

" Google Translated Text-to-Speech with festival and espeak for Pentadactyl
map <A-r> -builtin -js dactyl.execute(":!translate \"" + encodeURI(content.getSelection()) + "\" | festival --tts" )

"}}}

" Noscript plugin"{{{
" https://github.com/w0ng/dotfiles/blob/master/.pentadactylrc

"nmap -builtin ss :set script!<CR>
"nmap -builtin sa :set noscript-sites!=<A-Tab>
"nmap -builtin st :set noscript-tempsites!=<A-Tab>
"nmap -builtin su :set noscript-untrusted!=<A-Tab>
"}}}

" Toggle Styles {{{
" -----------------------------------------------------------------------------

" Go Dark
map -builtin <F4> :styletoggle<Space>-name<Space>hybrid<CR>   


" }}}


" Style: Hybrid Colours {{{
" -----------------------------------------------------------------------------
" https://github.com/w0ng/dotfiles/blob/master/.pentadactylrc
" TODO: Fix webfonts colouring/antialiasing.

style -name hybrid http://*,https://*,file://*,about:* <<EOM
  * {
    color: #C5C8C6 !important;
    background: #1D1F21 !important;
    border-color: #282A2E !important;
  }
  a, a * {
    color: #81A2BE !important;
    text-decoration: none !important;
  }
  a:hover, a:hover * {
    color: #F0C674 !important;
  }
  a:visited, a:visited * {
    color: #b294bb !important;
  }
  a:visited:hover, a:visited:hover * {
    color: #de935f !important;
  }
EOM
styledisable -name=hybrid

"}}}

"}}}
"}}}
" Style: Minimalistic Tabs {{{
" ----------------------------------------------------------------------------
" Based on @w0ng https://github.com/w0ng/dotfiles/blob/master/.pentadactylrc
" Which was based on http://userstyles.org/styles/99560/square-tab-for-firefox-australis

style -name minitabs chrome://* <<EOM
#TabsToolbar toolbarbutton {
    display: none !important;
}

#TabsToolbar .tabbrowser-tabs {
    background: #282A2E !important;
    min-height: 18px !important;
    padding-bottom: 2px;
}

#TabsToolbar .tabbrowser-tab {
    background: #282A2E !important;
    border: none !important;
    color: #707880 !important;
    font: 8pt Cousine,Monaco,Menlo,Consolas,monospace !important;
    margin: 0 !important;
}

#TabsToolbar .tabbrowser-tab[selected] {
    background: #282A2E !important;
    color: #aaaaaa !important;
}

#TabsToolbar .tabbrowser-tab:not([pinned]) {
    max-width: 170px !important;
    min-width: 100px !important;
}

#TabsToolbar .tabbrowser-tab:not([fadein]) {
    max-width: 1px !important;
    min-width: 1px !important;
}

#TabsToolbar .tabbrowser-tab:hover:not([selected]) {
    /*background: #F0C674 !important;
    color: #282A2E !important;*/
    background:#282A2E !important;
    color: #8C93A1 !important;
}

#TabsToolbar .tab-background {
    background: transparent !important;
    margin: 0 !important;
}

#TabsToolbar .tab-background-start,
#TabsToolbar .tab-background-end {
    display: none !important;
}

#TabsToolbar .tab-background-middle {
    background: transparent !important;
    margin: -4px -2px !important;
}

#TabsToolbar .tabbrowser-tab:after,
#TabsToolbar .tabbrowser-tab:before {
    display: none !important;
}

EOM
"}}}




" vim: set ts=2 sts=2 ft=pentadactyl fdm=marker sw=2 et: 
